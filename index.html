<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>What's New Feed</title>

<style>
  body{
    margin:0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: transparent;
    color:#000;
  }

  .feed{
    display:flex;
    flex-direction:column;
    gap:14px;
    padding: 0;
  }

  /* Card as a clickable link */
  .card{
    display:block;
    background:#cfcfcf;
    border-radius:18px;
    padding:14px 16px;
    text-decoration:none;
    color:inherit;
    transition: transform .12s ease, filter .12s ease;
  }

  .card:hover{
    transform: translateY(-1px);
    filter: brightness(0.98);
  }

  .top{
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-size:14px;
    font-weight:600;

    /* This line matches the sample more closely */
    padding-bottom: 8px;
    border-bottom: 2px solid rgba(0,0,0,0.25);
    margin-bottom: 8px;
  }

  .platform{
    display:flex;
    align-items:center;
    gap:8px;
  }

  .time{
    font-size:13px;
    font-weight:600;
  }

  .live{
    color:#e10600;
    letter-spacing:0.5px;
  }

  .text{
    font-size:14.5px;
    line-height:1.4;
  }
</style>
</head>

<body>

<div class="feed">

  <!-- Twitch (auto LIVE) -->
  <a class="card" href="https://www.twitch.tv/eiaska" target="_blank" rel="noopener">
    <div class="top">
      <div class="platform">üéÆ Twitch</div>
      <div class="time live" id="twitchTime">‚Ä¶</div>
    </div>
    <div class="text" id="twitchText">Checking Twitch status‚Ä¶</div>
  </a>

  <!-- YouTube (manual placeholder for now; update text/time anytime) -->
  <!-- Replace the href with her exact channel link if she gives it -->
  <a class="card" href="https://www.youtube.com/" target="_blank" rel="noopener">
    <div class="top">
      <div class="platform">‚ñ∂Ô∏è YouTube</div>
      <div class="time">7d</div>
    </div>
    <div class="text">Eiaska uploaded a new vlog üçÅ to YouTube</div>
  </a>

  <!-- Instagram (manual placeholder for now) -->
  <a class="card" href="https://www.instagram.com/kitsudare/" target="_blank" rel="noopener">
    <div class="top">
      <div class="platform">üì∏ Instagram</div>
      <div class="time">7d</div>
    </div>
    <div class="text">Eiaska posted on Instagram</div>
  </a>

  <!-- Fansly (links correctly now) -->
  <a class="card" href="https://fansly.com/elaska" target="_blank" rel="noopener" id="fanslyLink">
    <div class="top">
      <div class="platform">‚≠ê Fansly</div>
      <div class="time">22d</div>
    </div>
    <div class="text">Eiaska posted on Fansly</div>
  </a>

</div>

<script>
  // Twitch LIVE check (no keys needed)
  async function checkTwitch(){
    const timeEl = document.getElementById("twitchTime");
    const textEl = document.getElementById("twitchText");

    try{
      const res = await fetch("https://decapi.me/twitch/uptime/eiaska", { cache: "no-store" });
      const t = (await res.text()).trim().toLowerCase();

      if(t.includes("offline")){
        timeEl.classList.remove("live");
        timeEl.textContent = "Offline";
        textEl.textContent = "Eiaska is currently offline on Twitch";
      } else {
        timeEl.classList.add("live");
        timeEl.textContent = "LIVE";
        textEl.textContent = "Eiaska is live on Twitch streaming Fitness & Health";
      }
    } catch(e){
      timeEl.textContent = "";
      textEl.textContent = "Unable to check Twitch status right now";
    }

    sendHeight(); // ensure Carrd iframe resizes after updates
  }

  // Auto-resize helper (sends height to Carrd)
  function sendHeight(){
    const h = document.documentElement.scrollHeight;
    parent.postMessage({ type: "feedHeight", height: h }, "*");
  }

  window.addEventListener("load", () => {
    checkTwitch();
    sendHeight();
  });

  window.addEventListener("resize", sendHeight);

  // refresh Twitch status every 60 seconds
  setInterval(checkTwitch, 60000);

  // safety: keep height synced
  setInterval(sendHeight, 1500);
</script>

</body>
</html>
